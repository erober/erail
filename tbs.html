<!DOCTYPE html> 
<html>
    <meta charset="utf-8">
    <LINK REL=icon href="">
    <head>
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

            <!-- jQuery library -->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
            
            <!-- Latest compiled JavaScript -->
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
            <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
            <!--<script src="app.js"></script>-->
            <title>Trains Between Stations</title>
          </head>
    <body>

            <nav class="navbar navbar-inverse">
                    <div class="container-fluid">
                      <div class="navbar-header">
                        <a class="navbar-brand" href="#">About Trains</a>
                      </div>
                      <ul class="nav navbar-nav">
                        <li class="active"><a href="index.html">Home</a></li>
                        <li><a href="tbs.html">GET TRAIN BETWEEN</a></li>
                        <li><a href="#">Ticket Info</a></li>
                        <li><a href="pnrpage.html">PNR STATUS</a></li>
                        <li><a href="livestatus.html">Live Status</a></li>
                      </ul>
                    </div>
                  </nav>

                  <form action="#" method="GET">
                    FROM:<br>
                    <input type="text" name="from" id="from"><br>
                    TO:<br>
                    <input type="text" name="to" id="to"><br>
                    DATE:<br>
                    <input type="date" name="date" id="date"><br>
                    CLASS:<br>
                    <select>
                        <option id="option">SLEEPER</option>
                        <option id="option">AC</option>
                        <option id="option">GENERAL</option>
                    </select>
                    <br>
                    <br>
                    <button onclick="fun()">Submit</button>
                  </form> 
                  

    </body>
    <script>
    
    var axios = require('axios');
    function fun() { 
      
                var from = document.getElementById('from').value;
                var to = document.getElementById('to').value; 
                var date = document.getElementById('date').value;
                var clas = document.getElementById('option').value;
                var dat= date.split("-");
                var d=dat[2]+"-"+dat[1]+"-"+dat[0];
                console.log(from);
                console.log(to);
                console.log(d);
    var url= "https://api.railwayapi.com/v2/between/source/"+from+"/dest/"+to+"/date/"+d+"/apikey/x5ca0cxi5x" ;                
       console.log(url);
       
      //making request 
      axios.get(url)
     .then(function (response) {
      // handle success
       console.log(response);
      })
      .catch(function (error) {
    
       console.log(error);
       })
       .finally(function () {
       // always executed
      });   
          /*
           let xhr = new XMLHttpRequest;
            xhr.addEventListener('load', function(){
                var response = JSON.parse(this.responseText)
                console.log(response);
              })
              /*xhr.addEventListener('error',function()){
                console.log("error");
              }*/
            //console.log(from.value);
            //console.log(date.value);
              /*  var from = document.getElementById('from').value;
                var to = document.getElementById('to').value; 
                var date = document.getElementById('date').value;
                var clas = document.getElementById('option').value;
                var dat= date.split("-");
                var d=dat[2]+"-"+dat[1]+"-"+dat[0];
                console.log(from);
                console.log(to);
                console.log(d);
            var url= "https://api.railwayapi.com/v2/between/source/"+from+"/dest/"+to+"/date/"+d+"/apikey/x5ca0cxi5x" ;                
            console.log(url);
            xhr.open('GET', url )
            xhr.send();*/
                        }
    </script>
</html>